# 스레드

## 스레드란?

CPU 스케쥴러가 CPU에 전달하는 일 하나를 스레드라고 한다. 하나의 프로세스 내에 스레드가 여러개 존재할 수 있다. 스레드는 스레드 ID, 프로그램 카운터, 레지스터 집합, 스택으로 구성된다. 같은 프로세스 내에서 스레드는 자원을 공유하여 작업이 원할히 가능하다. 자원을 공유함에 따라 응답성이 향상되고, 중복이 줄어 효율성이 향상되며, 여러 cpu를 사용이 가능하다.



### 멀티 스레드의 장점

- 응답성 향상
  - 입출력으로 인해 작업이 진행되지 않더라도 다른 스레드가 작업을 계속하여 작업 요규가 빨라질 수 있다.
- 자원 공유
  - 프로세스가 가진 자원을 같은 프로세스 내의 모든 스레드가 공유하여 작업이 원할히 진행된다.
- 효율성 향상
  - 프로세스를 생성하는 자원이 소모되지 않아 중복을 막게되고 이에 따라 효율이 향상되게 된다.
- 다중 CPU 지원
  - 다중 cpu를 사용하여 cpu 사용량이 증가하고, 프로세스의 처리시간이 단축된다.



### 멀티 스레드의 단점

- 모든 스레드가 자원을 공유하기 때문에 한 스레드에 문제가 생기면 모든 스레드에 문제가 생기게 된다.





## 멀티 프로세싱 vs 멀티 스레드



#### 정의

멀티 프로세싱은 말 그대로 여러개의 프로세스를 통해 작업을 진행하는 것을 말한다.
멀티 스레드는 말 그대로 스레드를 여러개 이용하는 것을 말한다.



#### 각자의 장점

멀티 프로세싱의 장점

- 멀티 스레드와 달리 각 프로세스가 서로 영향을 끼치지 않고, 정상적으로 수행된다.

멀티 스레드의 장점

- 중복을 최소화 하여 자원의 효율성이 증가한다.

- Context Switch의 Overhead가 멀티 프로세싱에 비해 적다

- 응답성이 빠르다.

  



## 멀티 스레드 모델

### 커널 스레드

- 커널이 멀티스레드를 지원하는 방식으로 1 to 1 모델이라고 한다. 이는 Context Switch의 Overhead가 사용자 스레드보다 크나, 입출력 상태에도 작업할 수 있다.





### 사용자 스레드

- 운영체제가 멀티 스레드를 지원하지 않아, 라이브러리를 통해 구현되며 1 to N모델이다. 장점으로는 Context Switch의 Overhead가 거이 없다. 단점은 하나의 커널 스레드에 연결 되기 떄문에 입출력 작업이 진행 될 때 대기해야한다.





이 두개의 단점을 해결하기위해 멀티레벨 스레드를 사용한다.

### 멀티 레벨 스레드

- 커널 스레드의 개수가 사용자 스레드 보다 적게 유지되고, 각 방식을 혼용하여 각 방식의 장단점을 다 갖고 있다.









> 참조
>
> 조성호/ 쉽게배우는 운영체제/ 한빛아카데미(2018)
>
> https://github.com/JaeYeopHan/Interview_Question_for_Beginner/tree/master/OS#cpu-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%9F%AC ( 스레드 & 멀티 프로세싱 vs 멀티 스레드)





